# a single command to visualize an svn project

# requires the convert_logs dir to be in the PATH

if ! [ -d .svn ]; then
    echo "the current directory isn't an svn repository";
    exit 1;
fi

dir=`pwd`/.svn/.code_swarm
mkdir -p $dir
svn log -v > $dir/svn.log

convert_logs.py -s $dir/svn.log -o $dir/log.xml

if ! [ -a $dir/project.config ]; then
    cp `dirname $0`/config.template $dir/project.config
fi

cd `dirname $0`/../
./run.sh $dir/project.config